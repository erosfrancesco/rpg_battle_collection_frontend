<div *ngIf="checkItemProperties()">
  <mat-accordion>
    <button mat-raised-button color="primary" disableRipple class="wrapper"> 
      <mat-expansion-panel *ngFor="let item of ai.properties.waterfall; let i = index" [attr.data-index]="i" class="mat-elevation-z2">
        
        <mat-expansion-panel-header>

          <mat-panel-title> Step {{i}} </mat-panel-title>
          	
      		<mat-icon color="warn" (click)="removeWaterfallFunction(i)">cancel</mat-icon> 
    		
        </mat-expansion-panel-header>

      

  	   <div>
        <span> Step: {{i}} </span> <br>
        <!--

        <app-ace-editor-wrapper (change)="getCode()" [code]="item.body" 
                                (input)="item.params = $event.target.value" [params]="item.params">                    
        </app-ace-editor-wrapper>
        <!-- -->

        <mat-form-field style="width: 100%;">
          <input matInput [value]="item.params" (input)="item.params = $event.target.value"/>
        </mat-form-field>

        <ace [config]="config" [mode]="'javascript'" [theme]="'ambiance'" [(value)]="item.body"></ace>



       </div>

       



      </mat-expansion-panel>


    </button>

    <button mat-raised-button color="primary" (click)="addWaterfallFunction()">add</button>

    <!--
    <mat-expansion-panel (opened)="panelOpenState = true"
                         (closed)="panelOpenState = false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Self aware panel
        </mat-panel-title>
        <mat-panel-description>
          Currently I am {{panelOpenState ? 'open' : 'closed'}}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <p>I'm visible because I am open</p>
    </mat-expansion-panel>
    <!---->

  </mat-accordion>
</div>